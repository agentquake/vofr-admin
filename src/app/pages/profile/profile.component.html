<nb-card>
    <nb-card-header>Profile</nb-card-header>
    <nb-card-body>
        <div class="row justify-content-center">
            <div class="col-6">
                <form name="form" #f="ngForm" (ngSubmit)="f.form.valid && onSave(f.submitted && firstName.invalid)"
                    novalidate>
                    <div class="row form-group">
                        <div class="col-3">
                            <label for="firstName" class="title">First name</label>
                        </div>
                        <div class="col-9">
                            <input id="firstName" name="firstName" #firstName="ngModel" type="text" class="input"
                                [(ngModel)]="user.firstName" nbInput fullWidth status="primary" [disabled]="!isEdit"
                                required>
                            <div *ngIf="f.submitted && firstName.invalid" class="text-danger">
                                <div *ngIf="firstName.errors.required">First Name is required</div>
                            </div>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-3">
                            <label for="lastName" class="title">Last name</label>
                        </div>
                        <div class="col-9">
                            <input id="lastName" name="lastName" #lastName="ngModel" type="text" class="input"
                                [(ngModel)]="user.lastName" nbInput fullWidth status="primary" [disabled]="!isEdit"
                                required>
                            <div *ngIf="f.submitted && lastName.invalid" class="text-danger">
                                <div *ngIf="lastName.errors.required">Last Name is required</div>
                            </div>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-3">
                            <label for="email" class="title">Email</label>
                        </div>
                        <div class="col-9">
                            <input id="email" name="email" #email="ngModel" type="text" class="input" email
                                [(ngModel)]="user.email" nbInput fullWidth status="primary" [disabled]="true">
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-3">
                            <label for="phoneNumber" class="title">Phone number</label>
                        </div>
                        <div class="col-9">
                            <input id="phoneNumber" name="phoneNumber" #phoneNumber="ngModel" type="text" class="input"
                                [(ngModel)]="user.phoneNumber" nbInput fullWidth status="primary" [disabled]="!isEdit"
                                pattern="[0-9]+">
                            <div *ngIf="f.submitted && phoneNumber.invalid" class="text-danger">
                                <div *ngIf="phoneNumber.errors.pattern">phoneNumber must be a valid</div>
                            </div>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-3">
                            <label for="address" class="title">Address</label>
                        </div>
                        <div class="col-9">
                            <input id="address" name="address" #address="ngModel" type="text" class="input"
                                [(ngModel)]="user.address" nbInput fullWidth status="primary" [disabled]="!isEdit">
                        </div>
                    </div>
                    <button nbButton status="primary" type="button" (click)="onClickEdit()"
                        *ngIf="!isEdit">Edit</button>
                  <button nbButton status="danger" type="button" (click)="open(addNewDialog)"
                          *ngIf="!isEdit">Change Password</button>
                    <button nbButton status="danger" type="button" (click)="onCancel()" *ngIf="isEdit">Cancel</button>
                    <button nbButton status="success" type="submit" *ngIf="isEdit">Save</button>
                </form>
            </div>
        </div>
    </nb-card-body>
</nb-card>


<!-- Add new template -->
<ng-template #addNewDialog let-data let-ref="dialogRef">
  <nb-card [size]="'large'" style="width: 500px">
    <nb-card-header>Change Password</nb-card-header>
    <nb-card-body>
      <div class="row justify-content-center">
        <div class="col-10">
          <form name="form" #formtwo="ngForm" (ngSubmit)="formtwo.form.valid && onSaveTwo(formtwo.submitted && firstName.invalid)"
                novalidate>
            <div class="row form-group">
              <div class="col-5">
                <label for="oldPass" class="title">Old Password</label>
              </div>
              <div class="col-6">
                <input id="oldPass" name="oldPass" #oldPass="ngModel" type="password" class="input"
                       [(ngModel)]="oldPassword" nbInput fullWidth status="primary"
                       required>
                <div *ngIf="formtwo.submitted && oldPass.invalid" class="text-danger">
                  <div *ngIf="oldPass.errors.required">Old Password is required</div>
                </div>
              </div>
            </div>
            <div class="row form-group">
              <div class="col-5">
                <label for="newPass" class="title">New Password</label>
              </div>
              <div class="col-6">
                <input id="newPass" name="newPass" #newPass="ngModel" type="password" class="input"
                       [(ngModel)]="newPassword" nbInput fullWidth status="primary"
                       required>
                <div *ngIf="formtwo.submitted && newPass.invalid" class="text-danger">
                  <div *ngIf="newPass.errors.required">New Password is required</div>
                </div>
              </div>
            </div>
            <div class="row form-group">
              <div class="col-5">
                <label for="newRepass" class="title">Confirm Password</label>
              </div>
              <div class="col-6">
                <input id="newRepass" name="newRepass" #newRepass="ngModel" type="password" class="input" email
                       [(ngModel)]="newRepassword" nbInput fullWidth status="primary">
                <div *ngIf="formtwo.submitted && newRepass.invalid" class="text-danger">
                  <div *ngIf="newRepass.errors.required">New Password is required</div>
                </div>
              </div>
            </div>
            <pre class="text-danger">{{  errors | json }}</pre>
            <button nbButton status="danger" type="button" (click)="test()" >Cancel</button>
            <button  nbButton status="success" (click)="changePassword(dialogRef)" type="submit">Update</button>
          </form>
        </div>
      </div>
    </nb-card-body>
<!--    <nb-card-footer>-->
<!--      <button (click)="ref.close()" nbButton status="danger" style="margin-right: 1rem;">Cancel</button>-->
<!--      <button (click)="changePassword();ref.close()" nbButton type="submit" status="success">Save</button>-->
<!--    </nb-card-footer>-->
  </nb-card>
</ng-template>
